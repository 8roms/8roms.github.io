---
layout: default
title: Untitled Post
---

<a id="backLink"><i class="bi bi-chevron-left"></i> Back</a>

<h1 id="postTitle" class="display-4 placeholder-glow"><span class="placeholder col-7"></span></h1>

<p>
        Posted by <a class="text-decoration-none placeholder-glow" id="postAuthor"><span class="placeholder col-1"></span></a> in
        
        <span class="badge bg-primary">
            <a class="text-light text-decoration-none"  id="postBoard"></a>
        </span>

        <span class="placeholder-glow" data-bs-toggle="tooltip" data-title="Loading time..." id="postTime">
            <span class="placeholder col-1"></span> ago
        </span>
    
</p>


<p id="postContent" class="lead placeholder-glow"><span class="placeholder col-7"></span>
    <span class="placeholder col-4"></span> <!-- fancy glowing placeholders -->
    <span class="placeholder col-4"></span>
    <span class="placeholder col-6"></span>
    <span class="placeholder col-8"></span>
</p>

<h2>Comments</h2>

<div class="card">

    <div class="card-header">
        <span>Post a comment</span>
    </div>

    <form class="card-body">
        <div class="mb-3 form-floating">
            <textarea id="commentContent" class="form-control" id="commentContent" style="min-height: 5rem;"></textarea>
            <label for="commentContent" class="form-label">Type your comment</label>
        </div>
        <button id="submitCommentButton" type="button" class="btn btn-primary">Post</button>
    </form>
</div>

<br>

<div id="postComments">
    <div id="commentsLoading">
        <strong>Loading comments... </strong>
        <div id="postsLoadingSpinner" class="spinner-border" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
    </dv>
</div>

<script type="module">
    import {getPostFromURL} from '/{{ site.repo }}/modules/classes.js';
    import {displayComment} from '/{{ site.repo }}/modules/ui.js';
    import {URLParams, getPost, getComments} from '/{{ site.repo }}/modules/load.js';
    import {sendComment} from '/{{ site.repo }}/modules/post.js';

    (async () => {
        // var post = await getPostFromURL('https://api.github.com/repos/Aardvark-Industries/GitForum-content/issues/' + URLParams.get('post'));
        var post = await getPost(window.OCTOKIT, 'Aardvark-Industries', 'GitForum-content', URLParams.get('post'));

        document.getElementById("postTitle").innerText = post.title;
        document.getElementById("postContent").innerText = post.content;

        document.getElementById("postBoard").innerText = post.board;
        document.getElementById("postBoard").href = "board?board=" + post.board;

        document.getElementById("postAuthor").innerText = post.author;
        document.getElementById("postAuthor").href = "/user?user=" + post.author;

        document.getElementById("backLink").href = "board?board=" + post.board;

        var DateTime = luxon.DateTime;
        document.getElementById("postTime").innerText = DateTime.fromISO(post.date).toRelative().toLocaleString(DateTime.DATETIME_MED);
        document.getElementById("postTime").setAttribute('data-title', DateTime.fromISO(post.date).toLocaleString(DateTime.DATETIME_MED));
        document.getElementById("postTime").setAttribute('data-bs-original-title', document.getElementById("postTime").dataset.title); // set bootstrap tooltip as well

        document.title = "GitForum - " + post.title;

        //============================

        var comments = await getComments(window.OCTOKIT, 'Aardvark-Industries', 'GitForum-content', post.id);
        
        comments.reverse().forEach(comment => displayComment(comment, post));

        document.getElementById("commentsLoading").style.display = "none";
    })();

    async function submitComment(){
        await sendComment(window.OCTOKIT, 'Aardvark-Industries', 'GitForum-content', URLParams.get("post"), document.getElementById("commentContent").value);
        
    }

    document.getElementById("submitCommentButton").onclick = (() => {submitComment()});
        
</script>